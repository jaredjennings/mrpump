#!/usr/bin/python

import sys
import logging
from ConfigParser import ConfigParser
from golem.auth import get_api
from golem.drive import loop
from golem.chem import Chem
import golem

if __name__ == '__main__':
    cp = ConfigParser()
    cp.read(sys.argv[1])
    logging.basicConfig(stream=sys.stdout, level=logging.DEBUG,
        format='%(asctime)s: %(name)s: %(levelname)s: %(message)s')
    api = get_api(cp)
    chem = Chem()
    how_often = float(cp.get('global', 'check every'))
    cache = cp.get('global', 'cache')
    me = cp.get('global', 'screen name')
    loop(api, how_often, cache, me, chem)
